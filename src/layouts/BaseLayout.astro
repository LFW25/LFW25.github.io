---
import "../styles/global.css";
const { title } = Astro.props;
---

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>{title}</title>
    <meta name="viewport" content="width=device-width" />
  </head>
  <body>
<nav class="site-nav">
  <div class="nav-inner">
    <a href="/" class="nav-brand">Lily Williams</a>

    <ul class="nav-links">
      <li><a href="/projects">Projects</a></li>
      <li><a href="/research">Research</a></li>
      <li><a href="/cv">CV</a></li>
      <li><a href="/contact">Contact</a></li>
    </ul>

    <button class="compact-toggle" type="button" id="compactToggle" aria-pressed="false">
      Compact view
    </button>
  </div>
</nav>
    <main>
      <slot />
    </main>
<script>
  const KEY = "lw_compact_mode";
  const btn = document.getElementById("compactToggle");

  function setCompactMode(enabled) {
    document.body.classList.toggle("compact-mode", enabled);
    btn?.setAttribute("aria-pressed", String(enabled));
    btn.textContent = enabled ? "Comfort view" : "Compact view";
    localStorage.setItem(KEY, enabled ? "1" : "0");
  }

  // Load saved preference
  const saved = localStorage.getItem(KEY);
  const enabled = saved === "1";
  if (enabled) setCompactMode(true);

  // Toggle on click
  btn?.addEventListener("click", () => {
    const nowEnabled = !document.body.classList.contains("compact-mode");
    setCompactMode(nowEnabled);
  });
</script>

  </body>
</html>
