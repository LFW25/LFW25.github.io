---
import BaseLayout from "../layouts/BaseLayout.astro";

const projects = [
  {
    title: "Brownian Crystallisation",
    category: "Physics",
    thumbnail: "/images/crystallisation.png",
    preview: "/images/crystallisation.mp4",
    link: "/projects/plasma"
  },
  {
    title: "Two-Stream Instability Simulation",
    category: "Physics",
    thumbnail: "/images/twostream.png",
    preview: "/images/twostream.mp4",
    link: "/projects/twostream"
  }
];
---

<BaseLayout title="Projects">
  <section class="projects-container">
    {projects.map(project => (
      <a href={project.link} class="project-card">
        <div class="project-media">
          <img
            src={project.thumbnail}
            alt={project.title}
            class="project-static"
            loading="lazy"
          />

          <video
            class="project-preview"
            src={project.preview}
            muted
            loop
            playsinline
            preload="none"
          ></video>
        </div>

        <h3 class="project-title">{project.title}</h3>
        <span class="project-category">{project.category}</span>
      </a>
    ))}
  </section>
</BaseLayout>

<!-- JS GOES HERE -->
<script>
  document.querySelectorAll(".project-card").forEach(card => {
    const video = card.querySelector("video");
    if (!video) return;

    card.addEventListener("mouseenter", () => {
      video.currentTime = 0;
      video.play();
    });

    card.addEventListener("mouseleave", () => {
      video.pause();
      video.currentTime = 0;
    });
  });
</script>
