---
import BaseLayout from "../../layouts/BaseLayout.astro";

const project = {
  title: "Investigating Global Trust in Science by Gender, Faith, Politics, and Education",
  subtitle:
    "Survey-weighted analysis of trust and attitudes toward science across gender, education, politics, and religiosity",
  tags: ["Data Science"],
  stackShort: ["Python", "pandas", "Survey Weights", "Regression", "Visualization", "Reproducibility"],
  // Optional media (set these to real files if you have them; set video to null if not)
  poster: "/images/trust-static.png",
  video: null,
  links: [
    // { label: "Repository", href: "https://github.com/..." },
    // { label: "Notebook", href: "https://github.com/.../blob/main/..." },
  ],
};
---

<BaseLayout title="Trust in Science">
  <header class="project-header">
    <h1>{project.title}</h1>
    <p class="project-subtitle">{project.subtitle}</p>

    <div class="tag-row">
      {project.tags.map(tag => (
        <span class={`badge badge-${tag.toLowerCase().replace(/\s+/g, "-")}`}>{tag}</span>
      ))}
    </div>

    <div class="tag-row tag-row-tech">
      {project.stackShort.map(item => (
        <span class="tag-pill">{item}</span>
      ))}
    </div>
  </header>

  {project.video && (
    <section class="project-media-block">
      <div class="project-media">
        <video
          class="project-video"
          src={project.video}
          poster={project.poster}
          muted
          loop
          playsinline
          preload="metadata"
          controls
        ></video>
      </div>
      <p class="project-caption">
        Optional: short clip/screen recording of results (plots, dashboards, or workflow). Poster shows before playback.
      </p>
    </section>
  )}

  <section class="project-section">
    <h2>Motivation</h2>
    <p>
      Public trust in science and healthcare shapes outcomes: people’s medical decisions, responses to public health guidance,
      and interpretation of uncertainty and risk. I wanted to explore how attitudes related to science/healthcare vary across
      gender, and how those relationships interact with education, political orientation, and religiosity — while being careful
      about the statistical pitfalls common in large survey datasets.
    </p>
  </section>

  <section class="project-section">
    <h2>What I analyzed</h2>
    <p>
      The analysis focuses on trust/attitude measures (Likert-style items) and compares distributions across groups, then examines
      correlations and modeled relationships with key demographic predictors. The goal is not to “win an argument” with a plot,
      but to produce an interpretable, reproducible workflow that a careful reader could audit.
    </p>

    <div class="card">
      <h3>Core comparisons</h3>
      <ul class="project-bullets">
        <li><strong>Gender × trust:</strong> how trust/attitudes differ by gender</li>
        <li><strong>Education × trust:</strong> association between education level and trust measures</li>
        <li><strong>Politics × trust:</strong> association between political orientation and trust measures</li>
        <li><strong>Religiosity × trust:</strong> association between religiosity and trust measures</li>
      </ul>
    </div>
  </section>

  <section class="project-section">
    <h2>Methodology</h2>
    <p>
      Survey analysis is easy to get wrong. This project treats methodology as a first-class concern: consistent recoding of
      numeric survey responses, explicit handling of missing values, and the use of survey weights when comparing groups so that
      summary statistics better represent the target population.
    </p>

    <div class="two-col">
      <div class="card">
        <h3>Data preparation</h3>
        <div class="tag-row tag-row-tech">
          <span class="tag-pill">Cleaning & recoding</span>
          <span class="tag-pill">Missingness handling</span>
          <span class="tag-pill">Reverse-coding</span>
          <span class="tag-pill">Consistent scales</span>
        </div>
        <ul class="project-bullets">
          <li>Converted numeric-coded survey columns safely (coercing non-responses to missing)</li>
          <li>Reverse-coded negatively worded items to keep interpretation consistent</li>
          <li>Kept analysis scoped to interpretable comparisons rather than overfitting</li>
        </ul>
      </div>

      <div class="card">
        <h3>Analysis & reporting</h3>
        <div class="tag-row tag-row-tech">
          <span class="tag-pill">Survey weights</span>
          <span class="tag-pill">Group comparisons</span>
          <span class="tag-pill">Regression</span>
          <span class="tag-pill">Visualization</span>
        </div>
        <ul class="project-bullets">
          <li>Used weights for group summaries where appropriate</li>
          <li>Focused on effect sizes and directionality, not just “significance”</li>
          <li>Designed plots to be readable and honest about uncertainty</li>
        </ul>
      </div>
    </div>
  </section>

  <section class="project-section">
    <h2>Challenges & debugging</h2>
    <p>
      A recurring practical challenge in survey analysis is reshaping and aggregating data cleanly when columns contain mixed
      types or duplicated labels, and when missingness is encoded inconsistently across variables. Debugging involved making
      transformations explicit and validating intermediate outputs (counts, distributions, and spot-checks) before producing plots.
    </p>
  </section>

<section class="results-section">
  <h2>Global Patterns in Trust in Science</h2>

  <p class="results-intro">
    These maps show weighted national mean trust in science from World Values Survey Wave 7,
    stratified by religiosity, gender, political orientation, and education. The goal here
    isn’t just to “make pretty maps”—it’s to surface where trust differs systematically across
    groups, which matters directly for public health messaging and healthcare decision-making.
  </p>

  <div class="results-grid">
    <figure class="results-card">
<a
  class="results-zoom"
  href="#"
  data-full="/images/trust_faith_combined.png"
  data-alt="Trust in science by religiosity: no religion vs religious affiliation"
>

        <img
          src="/images/trust_faith_combined.png"
          alt="Trust in science by religiosity: no religion vs religious affiliation"
          loading="lazy"
        />
        <span class="zoom-hint">Click to expand</span>
      </a>
      <figcaption>
        Trust in science stratified by religious affiliation (religious vs non-religious).
      </figcaption>
    </figure>

    <figure class="results-card">
<a
  class="results-zoom"
  href="#"
  data-full="/images/trust_gender_combined.png"
  data-alt="Trust in science by gender and gender gap map (female minus male)"
>
        <img
          src="/images/trust_gender_combined.png"
          alt="Trust in science by gender and gender gap map (female minus male)"
          loading="lazy"
        />
        <span class="zoom-hint">Click to expand</span>
      </a>
      <figcaption>
        Trust in science by gender, including the gender gap (female − male).
      </figcaption>
    </figure>

    <figure class="results-card">
<a
  class="results-zoom"
  href="#"
  data-full="/images/trust_politics_combined.png"
  data-alt="Trust in science by political ideology: left, center, right"
>

        <img
          src="/images/trust_politics_combined.png"
          alt="Trust in science by political ideology: left, center, right"
          loading="lazy"
        />
        <span class="zoom-hint">Click to expand</span>
      </a>
      <figcaption>
        Trust in science across political ideology (left, center, right).
      </figcaption>
    </figure>

    <figure class="results-card">
<a
  class="results-zoom"
  href="#"
  data-full="/images/trust_edu_combined.png"
  data-alt="Trust in science by education level: lower, middle, higher (ISCED)"
>

        <img
          src="/images/trust_edu_combined.png"
          alt="Trust in science by education level: lower, middle, higher (ISCED)"
          loading="lazy"
        />
        <span class="zoom-hint">Click to expand</span>
      </a>
      <figcaption>
        Trust in science stratified by education level (ISCED categories).
      </figcaption>
    </figure>
  </div>
</section>

<section class="impact-section">
  <h2>What this means for public health & science communication</h2>

  <p>
    Trust in science isn’t a vague attitude—it shapes health behaviour. It affects whether people
    accept vaccines, adhere to public health guidance, seek preventative care, and believe medical
    advice when it conflicts with social or political identity. What these results highlight is
    that “trust” is not distributed evenly across populations: it can vary by education, ideology,
    and religiosity, and those differences can look very different depending on country context.
  </p>

  <p>
    From a public health perspective, the takeaway is that communication strategies shouldn’t assume
    a one-size-fits-all audience. When trust is lower in specific groups, simply increasing the volume
    of messaging often backfires. A better approach is targeted, trust-aware communication: working through
    credible messengers, addressing local concerns directly, and measuring outcomes (not just reach).
  </p>

  <div class="impact-cards">
    <div class="card">
      <h3>Policy / healthcare takeaway</h3>
      <ul class="project-bullets">
        <li><strong>Risk communication:</strong> tailor messaging to how different communities weigh uncertainty and authority.</li>
        <li><strong>Clinical context:</strong> trust influences adherence—especially for preventative care and chronic disease management.</li>
        <li><strong>Equity lens:</strong> gaps in trust can compound inequities if public health messaging misses specific groups.</li>
      </ul>
    </div>

    <div class="card">
      <h3>Methodological takeaway</h3>
      <ul class="project-bullets">
        <li><strong>Stratification matters:</strong> group averages can hide meaningful within-country differences.</li>
        <li><strong>Weights matter:</strong> population-weighted estimates can shift interpretations substantially.</li>
        <li><strong>Comparability matters:</strong> country-by-country context is essential before making causal claims.</li>
      </ul>
    </div>
  </div>

  <p class="impact-note">
    This project is intentionally framed as a careful descriptive analysis: it identifies where trust differs and
    suggests why this matters for healthcare systems and public messaging, while avoiding overclaiming causality.
  </p>
</section>


  <section class="project-section">
    <h2>What this demonstrates</h2>
    <p>
      This project demonstrates end-to-end data analysis skills on messy, real-world data: defining a scope, cleaning and recoding,
      choosing methods that match the data-generating process (including weighting), and communicating results in a way that avoids
      overclaiming. These skills transfer directly to product analytics, applied research, policy-facing data work, and R&amp;D teams
      working with observational datasets.
    </p>
  </section>

<!-- Lightbox modal -->
<div class="lightbox" id="lightbox" aria-hidden="true">
  <div class="lightbox-backdrop" data-close="true"></div>

  <div class="lightbox-dialog" role="dialog" aria-modal="true" aria-label="Expanded figure">
    <button class="lightbox-close" type="button" aria-label="Close" data-close="true">×</button>

    <img class="lightbox-img" id="lightboxImg" alt="" />
    <p class="lightbox-caption" id="lightboxCaption"></p>
  </div>
</div>



  {project.links?.length > 0 && (
    <section class="project-section">
      <h2>Links</h2>
      <ul class="project-bullets">
        {project.links.map(l => (
          <li><a href={l.href} target="_blank" rel="noreferrer">{l.label}</a></li>
        ))}
      </ul>
    </section>
  )}

  <p class="back-link">
    ← <a href="/projects">Back to Projects</a>
  </p>

<script>
  const lightbox = document.getElementById("lightbox");
  const lightboxImg = document.getElementById("lightboxImg");
  const lightboxCaption = document.getElementById("lightboxCaption");

  const openLightbox = (src, alt, caption) => {
    lightboxImg.src = src;
    lightboxImg.alt = alt || "";
    lightboxCaption.textContent = caption || "";

    lightbox.setAttribute("aria-hidden", "false");
    lightbox.classList.add("is-open");

    // prevent background scroll
    document.body.style.overflow = "hidden";
  };

  const closeLightbox = () => {
    lightbox.classList.remove("is-open");
    lightbox.setAttribute("aria-hidden", "true");

    // clear src to avoid keeping giant images in memory
    lightboxImg.src = "";
    lightboxImg.alt = "";
    lightboxCaption.textContent = "";

    document.body.style.overflow = "";
  };

  // Open when clicking any results image
  document.querySelectorAll(".results-zoom").forEach((a) => {
    a.addEventListener("click", (e) => {
      e.preventDefault();
      const src = a.getAttribute("data-full");
      const alt = a.getAttribute("data-alt") || a.querySelector("img")?.alt || "";
      const caption = a.closest("figure")?.querySelector("figcaption")?.textContent || "";
      if (!src) return;
      openLightbox(src, alt, caption);
    });
  });

  // Close when clicking backdrop or close button
  lightbox.addEventListener("click", (e) => {
    const target = e.target;
    if (target && target.getAttribute("data-close") === "true") closeLightbox();
  });

  // Close on ESC
  document.addEventListener("keydown", (e) => {
    if (e.key === "Escape" && lightbox.classList.contains("is-open")) {
      closeLightbox();
    }
  });
</script>


</BaseLayout>

<style>
  .project-header {
    margin-bottom: 1.5rem;
  }

  .project-subtitle {
    color: var(--muted);
    margin: 0.4rem 0 0.8rem;
    max-width: 75ch;
  }

  .project-section {
    margin-top: 2.2rem;
  }

  .project-bullets {
    margin: 0.75rem 0 0;
    padding-left: 1.25rem;
  }

  .project-bullets li {
    margin: 0.5rem 0;
  }

  .project-media-block {
    margin-top: 1.2rem;
  }

  .project-caption {
    color: var(--muted);
    font-size: 0.95rem;
    margin: 0.6rem 0 0;
  }

  .project-media {
    width: 100%;
    aspect-ratio: 16 / 9;
    overflow: hidden;
    border-radius: 12px;
    background: #000;
  }

  .project-video {
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
  }

  .two-col {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
    gap: 1.25rem;
    margin-top: 1rem;
  }

  .card {
    background: var(--card-bg);
    border: 1px solid var(--border);
    border-radius: var(--radius);
    padding: 1rem;
  }

  .card h3 {
    margin-top: 0;
  }

  .back-link {
    margin-top: 2.5rem;
    font-weight: 600;
  }

/* =========================
   Results grid (if not already in global.css)
   ========================= */

.results-section {
  margin-top: 3rem;
}

.results-intro {
  max-width: 85ch;
  color: var(--muted);
  margin-bottom: 1.5rem;
}

.results-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
  gap: 1.75rem;
}

.results-card {
  background: var(--card-bg);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 1rem;
}

.results-zoom {
  display: block;
  position: relative;
  border-radius: 10px;
  overflow: hidden;
  text-decoration: none;
}

.results-zoom img {
  width: 100%;
  display: block;
  border-radius: 10px;
  transform: scale(1);
  transition: transform 0.25s ease;
}

.results-zoom:hover img {
  transform: scale(1.02);
}

.zoom-hint {
  position: absolute;
  right: 10px;
  bottom: 10px;
  font-size: 0.8rem;
  padding: 0.25rem 0.55rem;
  border-radius: 999px;
  background: rgba(0, 0, 0, 0.55);
  color: #fff;
  border: 1px solid rgba(255, 255, 255, 0.18);
  backdrop-filter: blur(6px);
}

.results-card figcaption {
  margin-top: 0.65rem;
  font-size: 0.92rem;
  color: var(--muted);
  line-height: 1.45;
}

/* =========================
   Lightbox modal
   ========================= */

.lightbox {
  position: fixed;
  inset: 0;
  z-index: 9999;
  display: none;
}

.lightbox.is-open {
  display: block;
}

.lightbox-backdrop {
  position: absolute;
  inset: 0;
  background: rgba(0, 0, 0, 0.72);
}

.lightbox-dialog {
  position: relative;
  max-width: min(1100px, 92vw);
  max-height: 88vh;
  margin: 5vh auto 0;
  background: rgba(15, 17, 21, 0.92);
  border: 1px solid rgba(255, 255, 255, 0.14);
  border-radius: 16px;
  padding: 0.9rem;
  box-shadow: 0 24px 80px rgba(0, 0, 0, 0.55);
  backdrop-filter: blur(8px);
}

.lightbox-img {
  width: 100%;
  max-height: 74vh;
  object-fit: contain;
  display: block;
  border-radius: 12px;
  background: #000;
}

.lightbox-caption {
  margin: 0.7rem 0 0;
  color: var(--muted);
  font-size: 0.95rem;
  line-height: 1.45;
}

.lightbox-close {
  position: absolute;
  right: 10px;
  top: 8px;
  width: 38px;               
  height: 38px;
  border-radius: 999px;
  border: 1px solid rgba(255, 255, 255, 0.18);
  background: rgba(0, 0, 0, 0.35);
  color: #fff;
  font-size: 1.4rem;
  line-height: 1;
  cursor: pointer;
}

.lightbox-close:hover {
  border-color: rgba(255, 255, 255, 0.35);
}


</style>
